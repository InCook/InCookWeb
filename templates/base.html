{% load staticfiles %}

<!DOCTYPE html>
<html>
  <head>
    <!-- Google Icon Font -->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
    <!-- Font -->
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab" rel="stylesheet">
    <!-- custom stylesheet -->
    <link href="{% static 'recipe/css/base.css' %}" rel="stylesheet">
    <link href="{% static 'recipe/css/detail.css' %}" rel="stylesheet">

    <title>{{ title }}</title>
  </head>
  <body>
    <!--nav>
      <ul id="slide-out" class="side-nav">
        <li><a href="#!">Second Link</a></li>
        <li><div class="divider"></div></li>
        <li><a class="subheader">Subheader</a></li>
        <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
      </ul>
      <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
    </nav-->
    
    <div class="container">
      <div>
        <h2 class="title">YOU CAN MAKE <span class="title-recipe"><span class="title-count">{{ recipes.count }}</span> RECIPES</span></h2>
      </div>

      <div class="row">
        {% for recipe in recipes %}
        <div class="col s4">
          <div class="card">
            <div id="{{ recipe.id }}"class="card-image">
              <div class="card-image-hover card-image-hover-none">
                <div class="valign-wrapper">
                  <a class="center-align" href="#detail-modal">More detail</a>
                </div>
              </div>
              {% with 'recipe/img/'|add:recipe.thumbnail as thumbnail_src %}
              <img src="{% static thumbnail_src %}">
              {% endwith %}
            </div>
            <div class="card-content">
              <h4 class="card-title">{{ recipe.name }}</h4>
              <p class="card-author">{{ recipe.author }}</p>
            </div>
            <div class="card-action">

              {% if recipe in account.likes.all %}
              <a id="like-{{ recipe.id }}" class="like like-red"><i class="material-icons">favorite</i>{{ recipe.no_likes }}</a>
              {% else %}
              <a id="like-{{ recipe.id }}" class="like"><i class="material-icons">favorite_border</i>{{ recipe.no_likes }}</a>
              {% endif %}

              <a id="rating-{{ recipe.id }}" class="rating rating-yellow"><i class="material-icons">grade</i>{{ recipe.score }}</a>

              {% if recipe in account.bookmarks.all %}
              <a id="bookmark-{{ recipe.id }}" class="bookmark bookmark-blue"><i class="material-icons">bookmark</i>SAVE</a>
              {% else %}
              <a id="bookmark-{{ recipe.id }}" class="bookmark"><i class="material-icons">bookmark_border</i>SAVE</a>
              {% endif %}

            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <div id="add" class="fixed-action-btn">
        <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">add</i></a>
      </div>

      <!-- Detail -->
      <div id="detail-modal" class="modal modal-fixed-footer">
        <div class="modal-content">
          <h4 id="recipe-name">Modal Header</h4>
          <p id="recipe-author">A bunch of text</p>
          <img id="recipe-thumbnail" src="">
          <div id="recipe-ingredients">
            <p class="modal-subtitle"><span>Ingredients</span></p>
            <p class="modal-subcontent"></p>
          </div>
          <div id="recipe-direction">
            <p class="modal-subtitle"><span>Direction</span></p>
            <p class="modal-subcontent"></p>
          </div>
        </div>
        <div class="modal-footer">
          <a id="like-" class="modal-action btn-flat like"><i class="material-icons">favorite</i>2</a>
          <a id="rating-" class="modal-action btn-flat rating"><i class="material-icons">grade</i>4.0</a>
          <a id="bookmark-" class="modal-action btn-flat bookmark"><i class="material-icons">bookmark</i>SAVE</a>

          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
      </div>

    </div>

    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
    <!-- materializecss -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
    <!-- custom script -->
    <script src="{% static 'recipe/js/base.js' %}"></script>]
    <script src="{% static 'recipe/js/detail.js' %}"></script>
    {% block jsfiles %}
    {% endblock %}
  </body>
</html>